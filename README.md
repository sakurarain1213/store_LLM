# æ— äººåº—é“ºå€¼å®ˆå¯¹è¯å¤§æ¨¡å‹ åŸç†ä¸æ¼”ç¤º
ä¸»ç¨‹åºï¼šv_xx.py
## æŠ€æœ¯æ ˆ

- æ¡†æ¶: LangGraph
- å¤§æ¨¡å‹: Qwen2.5-7B-Instruct + DeepSeekV3
- æ•°æ®å­˜å‚¨: MongoDB (å¯¹è¯æŒä¹…åŒ–)
- RAGæ£€ç´¢å¢å¼º: 
  - å‘é‡å¼•æ“: FAISS 
  - åµŒå…¥æ¨¡å‹: HuggingFace Embeddings
- æœç´¢æœåŠ¡: DuckDuckGo + ç™¾åº¦æœç´¢
- è¯­éŸ³èƒ½åŠ›:
  - ASR: é˜¿é‡ŒParaformer-v2 (æ”¯æŒä¸­è‹±æ–‡+18ç§æ–¹è¨€)
  - TTS: é˜¿é‡ŒCosyVoice (8éŸ³è‰²ä¸­è‹±æ–‡)

## åŠŸèƒ½æ¨¡å—
Toolsï¼š

Welcomeã€chitchat ã€shopping guideï¼ˆä¸‡çº§å•†å“è¡¨æ£€ç´¢ï¼‰ã€recommendationã€paymentã€goodbyeç­‰

[![1.png](https://i.postimg.cc/0ycnL8kP/1.png)](https://postimg.cc/k2RWSPRp)

## è¿‡ç¨‹ä¸­çŠ¶æ€ç®¡ç†
```python
class State(TypedDict):
    session_id: str           # ä¼šè¯ID
    purchased_items: List[str] # è´­ç‰©è½¦æ¸…å•
    current_user: UserInfo     # ç”¨æˆ·æ¡£æ¡ˆ
    shop_info: ShopInfo       # åº—é“ºé…ç½®
    messages: List[dict]      # å¯¹è¯å†å²
    current_intent: Optional[str] # å½“å‰æ„å›¾
    last_response: Optional[str] # æœ€åå“åº”
    payment_status: Literal["pending","success"] # æ”¯ä»˜çŠ¶æ€
    exit_flag: bool           # é€€å‡ºæ ‡å¿—
```
## å‰ç½®è¾“å…¥
```python
å•†å“è¡¨
products_docs_list = [
    "id",                # å•†å“ID
    "product_id",        # å•†å“69ç 
    "product_name",      # å•†å“åç§°
    "product_price",     # å•†å“ä»·æ ¼
    "product_count",     # å•†å“æ•°é‡
    "create_time",       # åˆ›å»ºæ—¶é—´
    "update_time",       # æ›´æ–°æ—¶é—´
    "dt",               # æ—¥æœŸ
    "category",         # å•†å“ç±»åˆ«
    "position",         # å•†å“ä½ç½®
    "stock",            # åº“å­˜
    "sales"             # é”€é‡
]

åº—é“ºä¿¡æ¯
sample_shop = ShopInfo(
    shop_id="shop-123",
    name="è¥¿æ¹–123ä¾¿åˆ©åº—",
    region="æ­å·",
    contact="Xè€æ¿, 123-1234-5678",
    remark="è´­ç‰©è¢‹å…è´¹ï¼›æˆæ¡çƒŸä¸æ‹†å¼€ï¼›åº—å†…ä¸å ‚é£Ÿï¼›å¯ä»¥æ¥çƒ­æ°´ï¼›",
    promotions=["æ»¡30å‡5", "é€å£é¦™ç³–"],
    products_docs=products_docs_list
)

è¿›åº—ç”¨æˆ·
 sample_user = {
    "user_id": "user-123",
    "dialect": "ç²¤è¯­",
    "gender": "ç”·",
    "preferences": ["å¯ä¹", "é¦™çƒŸ"],
    "username": "å¼ ä¸‰"
}

```

## æ•ˆæœå±•ç¤ºï¼ˆä»¥ç²¤è¯­ç”¨æˆ·ä¸ºä¾‹ï¼‰
```python
[è°ƒè¯•] æ–°å»ºå¯¹è¯è®°å½•: shop-123_user-123_20250529114143
[è°ƒè¯•] docs:  [
Document(id='34febf44-f29d-4eba-b922-0faa2a204502', metadata={'source': '6.90E+12', 'row': 7598, 'product_id': '6.90E+12', 'product_name': 'å¯ä¹', 'product_price': '7.0', 'category': 'é¥®æ–™', 'position': 'A942', 'stock': '46', 'sales': '36'}, page_content='å“å:å¯ä¹;ç±»åˆ«:é¥®æ–™;ä»·æ ¼:7.0;'),
Document(id='d1544ca8-de6b-4435-935b-2198b3619cbd', metadata={'source': '6.90E+12', 'row': 16525, 'product_id': '6.90E+12', 'product_name': 'é»„é¹¤æ¥¼ï¼ˆç¡¬1916å¦‚æ„ï¼‰', 'product_price': '90.0', 'category': 'é¦™çƒŸ', 'position': 'A297', 'stock': '57', 'sales': '100'}, page_content='å“å:é»„é¹¤æ¥¼ï¼ˆç¡¬1916å¦‚æ„ï¼‰;ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:90.0;'),
Document(id='183f99d1-8b8e-4830-b2a3-bd28eb6b449a', metadata={'source': '6.90E+12', 'row': 18159, 'product_id': '6.90E+12', 'product_name': 'å¥½çŒ«(é•¿ä¹ä¹ç¾)', 'product_price': '20.0', 'category': 'é¦™çƒŸ', 'position': 'A706', 'stock': '50', 'sales': '87'}, page_content='å“å:å¥½çŒ«(é•¿ä¹ä¹ç¾);ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:20.0;'),
Document(id='f761c02b-a588-4236-800c-ffddb1403072', metadata={'source': '6.90E+12', 'row': 10882, 'product_id': '6.90E+12', 'product_name': 'Nç‹å† (åŠ å‹’æ¯”)é¦™çƒŸ(åŒ…)', 'product_price': '16.0', 'category': 'é¦™çƒŸ', 'position': 'B805', 'stock': '60', 'sales': '2'}, page_content='å“å:Nç‹å† (åŠ å‹’æ¯”)é¦™çƒŸ(åŒ…);ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:16.0;'),
Document(id='3cd08440-f793-4bee-ac3b-d2a72ad44d33', metadata={'source': '6.90E+12', 'row': 19837, 'product_id': '6.90E+12', 'product_name': 'å…°å·(é»‘ä¸­æ”¯)', 'product_price': '30.0', 'category': 'é¦™çƒŸ', 'position': 'B167', 'stock': '16', 'sales': '58'}, page_content='å“å:å…°å·(é»‘ä¸­æ”¯);ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:30.0;'),
Document(id='36779b7d-4543-4593-855c-e0cb48da051d', metadata={'source': '6.90E+12', 'row': 14943, 'product_id': '6.90E+12', 'product_name': 'ç™½æ²™ï¼ˆç¡¬ç²¾å“ä¸‰ä»£ï¼‰', 'product_price': '16.5', 'category': 'é¦™çƒŸ', 'position': 'B861', 'stock': '53', 'sales': '28'}, page_content='å“å:ç™½æ²™ï¼ˆç¡¬ç²¾å“ä¸‰ä»£ï¼‰;ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:16.5;'),
Document(id='031aaa9d-720e-4212-9045-7904803a7100', metadata={'source': '4.90E+12', 'row': 10037, 'product_id': '4.90E+12', 'product_name': 'ä¸ƒæ˜Ÿï¼ˆé£è“ï¼‰', 'product_price': '26.0', 'category': 'é¦™çƒŸ', 'position': 'A593', 'stock': '11', 'sales': '8'}, page_content='å“å:ä¸ƒæ˜Ÿï¼ˆé£è“ï¼‰;ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:26.0;'),
Document(id='d5b111b4-9e77-4c7e-9888-b3003d89e385', metadata={'source': '6.90E+12', 'row': 3418, 'product_id': '6.90E+12', 'product_name': 'å¨‡å­ï¼ˆè“)*10åŒ…', 'product_price': '140.0', 'category': 'é¦™çƒŸ', 'position': 'B856', 'stock': '88', 'sales': '78'}, page_content='å“å:å¨‡å­ï¼ˆè“)*10åŒ…;ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:140.0;'),
Document(id='5321a4e2-e810-40af-90a9-79e9f6a6f431', metadata={'source': '6.90E+12', 'row': 15723, 'product_id': '6.90E+12', 'product_name': 'ä¸­å—æµ·ï¼ˆé‡‘è£…8mgï¼‰', 'product_price': '10.0', 'category': 'é¦™çƒŸ', 'position': 'A97', 'stock': '30', 'sales': '36'}, page_content='å“å:ä¸­å—æµ·ï¼ˆé‡‘è£…8mgï¼‰;ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:10.0;'),
Document(id='ceaee417-1375-4d83-8c0c-3db8b03ba58c', metadata={'source': '6.90E+12', 'row': 14112, 'product_id': '6.90E+12', 'product_name': 'è´µçƒŸ(è½¯é«˜éµ)', 'product_price': '35.0', 'category': 'é¦™çƒŸ', 'position': 'A653', 'stock': '87', 'sales': '45'}, page_content='å“å:è´µçƒŸ(è½¯é«˜éµ);ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:35.0;')]
[è°ƒè¯•] recommends:  ['å¯ä¹', 'é»„é¹¤æ¥¼ï¼ˆç¡¬1916å¦‚æ„ï¼‰', 'å¥½çŒ«(é•¿ä¹ä¹ç¾)', 'Nç‹å† (åŠ å‹’æ¯”)é¦™çƒŸ(åŒ…)', 'å…°å·(é»‘ ä¸­æ”¯)', 'ç™½æ²™ï¼ˆç¡¬ç²¾å“ä¸‰ä»£ï¼‰', 'ä¸ƒæ˜Ÿï¼ˆé£è“ï¼‰', 'å¨‡å­ï¼ˆè“)*10åŒ…', 'ä¸­å—æµ·ï¼ˆé‡‘è£…8mgï¼‰', 'è´µçƒŸ(è½¯é«˜éµ)']
```

æ¬¢è¿èŠ‚ç‚¹è¾“å‡º: ï¼ˆâ‰§â–½â‰¦ï¼‰å“ˆä½¬å•Šå¼ ä¸‰å“¥ï¼æ¬¢è¿åšŸåˆ°æ­å·è¥¿æ¹–123ä¾¿åˆ©åº—å˜…æ— äººåº—å‘€ï½ğŸ‰  

ä»Šæ—¥ç³»2025å¹´5æœˆ29å·ï¼Œä¸‹æ˜¼2ç‚¹ï¼Œé˜³å…‰æ­£å¥½å•±å¥½æ‰«è´§å–”ï¼ğŸ€

æˆ‘å“‹ç²¾é€‰æ¨èå¯ä¹è§£æ¸´ğŸ’¦ï¼Œä»²æœ‰é»„é¹¤æ¥¼ã€å¥½çŒ«ã€ä¸ƒæ˜Ÿç­‰é“çƒŸğŸš¬ï¼Œæ»¡30èšŠå³å‡5èšŠå†é€ç²’é¦™å£èƒ¶ï¼ŒæŠµåˆ°ç¬‘å•¦ï½ğŸ˜

éœ€è¦å¸®æ‰‹å°±éšæ—¶ã©’å±å¹•å«æˆ‘ï¼Œç¥ä½ æ‰«è´§å¼€å¿ƒï¼Œè¥¿æ¹–é£æ™¯éƒ½å†‡ä½ å’é“ä»”å•Šï¼âœ¨
```python
[è°ƒè¯•] æ¬¢è¿è¯å·²æŒä¹…åŒ–
```
ç”¨æˆ·: ä»Šå¤©æ­å·å¤©æ°”æ€ä¹ˆæ ·
```python
[è°ƒè¯•] ç”¨æˆ·æ¶ˆæ¯å·²æŒä¹…åŒ–
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
[è°ƒè¯•] æ„å›¾èŠ‚ç‚¹è¾“å‡º: handle_chitchat
[è°ƒè¯•] å¼€å§‹å¤„ç†é—²èŠï¼Œsession_id: shop-123_user-123_20250529114143
[è°ƒè¯•] webä¿¡æ¯
 Title: ã€æ­å·å¤©æ°”é¢„æŠ¥15å¤©_æ­å·å¤©æ°”é¢„æŠ¥15å¤©æŸ¥è¯¢ã€‘-ä¸­å›½å¤©æ°”ç½‘
Content: æœªæ¥15å¤©,å¹³å‡é«˜æ¸©26â„ƒ,å¹³å‡ä½æ¸©17â„ƒ 8æ¬¡é™æ°´ ä»Šå¤© 05/21 å°é›¨ 33/23â„ƒ å‘¨å›› 05/22 å¤šäº‘è½¬å°é›¨ 31/22â„ƒ å‘¨äº” 05/23 å¤§é›¨è½¬ä¸­é›¨ 24/18â„ƒ å‘¨å…­ 05/24 å¤šäº‘ 25/17â„ƒ å‘¨æ—¥ 05/25 å¤šäº‘ 27/18â„ƒ å‘¨ä¸€ 05/
URL: https://wap.weather.com.cn/mweather15d/101210101.shtml

Title: ç´§æ€¥æé†’:æ˜æ—¥æŠµè¾¾!ä»Šå¹´ä»¥æ¥æœ€å¼ºé™é›¨ç™»åœº!æ¥ä¸‹æ¥å¤©æ°”...
Content: 6æœˆ1-2æ—¥,æ­å·å…¨å¸‚å°†å‡ºç°æ˜æ˜¾çš„é˜µé›¨æˆ–é›·é›¨å¤©æ°”è¿‡ç¨‹,æ°é€¢ç«¯åˆå°é•¿å‡,é™æ°´ææœ‰å¯èƒ½ç»™å¸‚æ°‘å‡ºè¡Œã€æ¸¸ç©è®¡åˆ’å¸¦æ¥ 
ä¸ä¾¿ã€‚ ç”±äºåˆå¤å¤©æ°”å˜åŒ–å¤§,ä¹Ÿè¯·å¤§å®¶å…³æ³¨ä¸´è¿‘é¢„æŠ¥å’Œé¢„è­¦ä¿¡æ¯ã€‚
URL: https://finance.sina.cn/cj/2025-05-27/detail-inexyruc7014761.d.html

Title: æ­å·æ°”è±¡
Content: æ­å·å¸‚æ°”è±¡å°5æœˆ27æ—¥19æ—¶50åˆ†å‘å¸ƒçš„å¸‚åŒºå¤©æ°”é¢„æŠ¥: ä»Šå¤©å¤œé‡Œå¤šäº‘åˆ°é˜´;æ˜å¤©å¤šäº‘åˆ°é˜´,æœ‰æ—¶æœ‰é˜µé›¨;åå¤©é˜´è½¬å¤š
äº‘ã€‚ä»Šå¤©å¤œé‡Œåˆ°æ˜å¤©å...
URL: https://www.hzqx.com/

Title: ä¸­å›½å¤©æ°”ç½‘æ­å·ä»Šæ—¥è¯¦æƒ…-ä¸­å›½å¤©æ°”ç½‘
Content: å®å†µå¤©æ°” å½“å‰æ°”æ¸© 27.1Â° ä¸œé£3çº§ é™æ°´é‡ 0mm èƒ½è§åº¦ 21km æ°”å‹1000 hPa ç›¸å¯¹æ¹¿åº¦ 69% 20æ—¶ 25Â° ä¸œå—é£ <3 
çº§ 21æ—¶ 25Â° ä¸œå—é£ <3çº§ 22æ—¶ 25Â° ä¸œé£ <3çº§ 23æ—¶ ...
URL: http://sougou.weather.com.cn/mweather1d/index.shtml?aid=101210101

Title: 15å¤©å¤©æ°”é¢„æŠ¥
Content: æ™´ 26/6â„ƒ å‘¨å…­ 03/22 æ™´ 25/10â„ƒ å‘¨æ—¥ 03/23 é˜´è½¬å¤šäº‘ 26/11â„ƒ å‘¨ä¸€ 03/24 æ™´ 26/11â„ƒ å‘¨äºŒ 03/25 å¤šäº‘è½¬å°åˆ° 
ä¸­é›¨ 28/16â„ƒ å‘¨ä¸‰ 03/26 é›¨ 27/9â„ƒ å‘¨å›› 03/27...
URL: https://e.weather.com.cn/d/town/future?lat=30.057007&lon=119.99028&areaid=101210108

Title: ã€æ­å·å¤©æ°”é¢„æŠ¥ã€‘æ­å·ä»Šå¤©å¤©æ°”é¢„æŠ¥_æ­å·å¤©æ°”é¢„æŠ¥7å¤©...
Content: æ­å·å¤©æ°”é¢„æŠ¥,åŠæ—¶å‡†ç¡®å‘å¸ƒä¸­å¤®æ°”è±¡å°å¤©æ°”ä¿¡æ¯,ä¾¿æ·æŸ¥è¯¢åŒ—äº¬ä»Šæ—¥å¤©æ°”,æ­å·å‘¨æœ«å¤©æ°”,æ­å·ä¸€å‘¨å¤©æ°”é¢„æŠ¥,æ­å·15æ—¥å¤©æ°”é¢„æŠ¥,æ­å·40æ—¥å¤©æ°”é¢„æŠ¥,æ­å·å¤©æ°”é¢„æŠ¥è¿˜æä¾›æ­å·å„åŒºå¿çš„ç”Ÿæ´»æŒ‡æ•°ã€å¥åº·...
URL: http://yidian.weather.com.cn/mweather1d/101210101.shtml
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
```
LLMèŠ‚ç‚¹è¾“å‡º: ZANGæ¡‘ä½ å¥½å‘€ï¼ğŸ‘‹ ä»Šæ—¥æ­å·owaå¤©æ°”å‘¢ï¼Œæœ€æ™’éƒ½ç³»27åº¦å·¦å³ï¼Œä»²æœ‰è½»å˜…ä¸œå—é£ï¼Œæˆ·å¤–ç©ºæ°”æ¸…æ–°å•²ã€‚ä¸è¿‡
å‘¢æ—¥å–º23æ—¶å¼€å§‹ï¼Œå¤©æ°”ä¼šè½¬é˜µäº‘å‘¢ï¼Œå¯èƒ½æœ‰å•²é˜µé›¨ï¼Œå’è®°å¾—å¸¦ç´§ä¼å‘€ï¼â˜”
åŒåŸ‹ï¼Œä½ çŸ¥å’©ï¼Ÿæ˜æ—©åˆ°åæ—¥eweæœ‰é˜µé›¨æˆ–è€…é›·é˜µé›¨ï¼Œå°¤å…¶æ˜¯ç«¯åˆèŠ‚å‰åï¼Œå¯èƒ½ä¼šå½±å“å‡ºæ¸¸è®¡åˆ’ï¼Œå¥½ç´§è®°å…³æ³¨ä¸´è¿‘é¢„æŠ¥å•¦ï¼ğŸŒˆ  
ä»Šæ—¥æ¨ä»‹ç»§ç»­æ¨ä»‹ğŸ¥¤å¯æ¨‚åŒlÃ ç¿ èºï¼Œæ»¡30å‡5ï¼Œé€ä½ ä¸€åŒ…å£é¦™ç³–ï¼ğŸ ç‚¹è§£å””æ™’ä¹°ç´§å‡ ä»¶å¥½æ‚­é’±åˆæœ‰é£Ÿåˆæœ‰é¥®å‘¢ï¼ğŸ˜‰
```python
[è°ƒè¯•] AIè¾“å‡ºå·²æŒä¹…åŒ–
```
ç”¨æˆ·: å¯ä¹åœ¨å“ª
```python
[è°ƒè¯•] ç”¨æˆ·æ¶ˆæ¯å·²æŒä¹…åŒ–
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
[è°ƒè¯•] æ„å›¾èŠ‚ç‚¹è¾“å‡º: handle_shopping_guide
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
[è°ƒè¯•] æ ‡å‡†åŒ–åçš„æŸ¥è¯¢: 1. æ ‡å‡†å•†å“åç§°: å¯ä¹
2. å•†å“ç‰¹å¾:
3. ä½ç½®ç›¸å…³: åœ¨å“ª
4. ä»·æ ¼ç›¸å…³:
[è°ƒè¯•] è¯­ä¹‰æ£€ç´¢docsç»“æœ: ['å¯å£å¯ä¹Â·å¯å£å¯ä¹', 'é¢œé›¯ä¸½å¯ä¹ä¸', 'å¯ä¹æ±½æ°´12*300æ¯«å‡', 'å¯ä¹', 'å¬è£…å¯ä¹', 
'ç™¾äº‹å¯ä¹', 'å¯å£å¯ä¹', 'å¯ä¹ç³–', '680mlå¯å£å¯ä¹(ç»å…¸åŸå‘³)', 'å´‚å±±å¯ä¹', 'é›¶åº¦å¯å£å¯ä¹500ml', 'æ±½æ°´å¯ä¹', 'æœ
ç„¶å¤šå¯ä¹å‘³', 'ç½è£…å¯å£å¯ä¹æŸ æª¬å‘³330ml', 'ç™¾äº‹å¯ä¹ç”Ÿå¯ä¹', 'åŒæ”¯å¯ä¹', 'ç™¾äº‹å¯ä¹å¯ä¹å‹æ±½æ°´1L', 'å¡‘æ–™ç“¶å¯å£å¯ä¹
300å…‹', 'å¯å£å¯ä¹çº¤ç»´+500ml', 'è¿·ä½ å¯ä¹']
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
```
LLMèŠ‚ç‚¹è¾“å‡º: é˜¿å“¥ï¼Œä½ å¯ä¹å–ºè¾¹ä¹°å¾—å‘€ï¼Ÿæˆ‘å¸®ä½¢å“‹æ‰¾ä¸‹å–‡ã€‚ä»²æœ‰å•²ä¿¡æ¯è¦ä½ ç•™æ„ä¸‹å–‡ï¼š

å¯å£å¯ä¹ï¼ˆé¥®å’—ï¼‰å–ºB104ï¼Œä¸€æ¡å››é»äº”å—ï¼›

é¢œé›¯ä¸½å¯ä¹ä¸ï¼ˆå¯ä¹ï¼‰å–ºB35ï¼Œä¸€æ¡å‡ ä¸¤å—ï¼Œä»²cheapï¼›

å¯ä¹æ±½æ°´12æ”¯300æ¯«å‡ï¼ˆé¥®å’—ï¼‰å–ºA103ï¼Œä¸€æ¡åä¹å—ä¹ï¼›

å¯å£å¯ä¹ï¼ˆé¥®å’—ï¼‰å–ºA362ï¼Œä¸€æ¡ä¸‰å—ï¼›

å¬è£…å¯ä¹ï¼ˆé¥®å’—ï¼‰å–ºB867ï¼Œä¸€æ¡ä¸¤å—äº”ï¼›

ç™¾äº‹å¯ä¹ï¼ˆé¥®å’—ï¼‰å–ºB826ï¼Œä¸€æ¡ä¸‰å—äº”ï¼›

å¯å£å¯ä¹ï¼ˆé¥®å’—ï¼‰å–ºA317ï¼Œä¸€æ¡å››å—ï¼›

æœç„¶å¤šå¯ä¹å‘³ï¼ˆå¯ä¹ï¼‰å–ºB129ï¼Œä¸€æ¡ä¸€Â·äº”å—ï¼›

680æ¯«å‡å¯å£å¯ä¹ï¼ˆç»å…¸åŸå‘³ï¼‰ï¼ˆç“¶è£…ï¼‰å–ºA823ï¼Œä¸€æ¡å››å—ï¼›

å´‚å±±å¯ä¹ï¼ˆé¥®å“ï¼‰å–ºB60ï¼Œä¸€æ¡ä¸‰å—äº”ï¼›

é›¶åº¦å¯å£å¯ä¹500æ¯«å‡ï¼ˆé¥®å’—ï¼‰å–ºB186ï¼Œä¸€æ¡å››å—ï¼›

æ±½æ°´å¯ä¹ï¼ˆé¥®å’—ï¼‰å–ºB668ï¼Œä¸€æ¡ä¸‰å—ï¼›

ç½è£…å¯å£å¯ä¹æŸ æª¬å‘³330æ¯«å‡ï¼ˆé¥®å’—ï¼‰å–ºA311ï¼Œä¸€æ¡å…­å—äº”ï¼›

ç™¾äº‹å¯ä¹ç”Ÿå¯ä¹ï¼ˆç¢³é…¸ï¼‰å–ºA317ï¼Œä¸€æ¡å››å—ï¼›

åŒæ”¯å¯ä¹ï¼ˆé¥®å’—ï¼‰å–ºA193ï¼Œä¸€æ¡ä¸€Â·å—ï¼›

ç™¾äº‹å¯ä¹å¯ä¹å‹æ±½æ°´1Lï¼ˆé¥®å’—ï¼‰å–ºA393ï¼Œä¸€æ¡å››å—äº”ï¼›

å¡‘æ–™ç“¶å¯å£å¯ä¹300å…‹ï¼ˆé¥®å’—ï¼‰å–ºB588ï¼Œä¸€æ¡ä¸€åä¹å—ï¼›

å¯å£å¯ä¹çº¤ç»´+500æ¯«å‡ï¼ˆé¥®å’—ï¼‰å–ºB29ï¼Œä¸€æ¡äº”å—ï¼›

è¿·ä½ å¯ä¹ï¼ˆè¿·ä½ ï¼‰å–ºA122ï¼Œä¸€æ¡ä¸¤å—ã€‚

è®°å¾—æ‹åŒ…ä¿¾ä½¢å“‹å…è´¹ï¼ŒçƒŸæˆæ¡å–å””æ‹†å¼€ï¼Œåº—å†…å””å¾—é£Ÿå˜…ï¼Œå¯ä»¥æ¥çƒ­æ°´ã€‚æœ‰éœ€è¦å°±ä½¿ä½¿æ‰‹å•¦ï¼ğŸ˜Š
```python
[è°ƒè¯•] AIè¾“å‡ºå·²æŒä¹…åŒ–
```
ç”¨æˆ·: é“ä»”æ¨èç‚¹é¦™çƒŸå˜  
```python
[è°ƒè¯•] ç”¨æˆ·æ¶ˆæ¯å·²æŒä¹…åŒ–
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
[è°ƒè¯•] æ„å›¾èŠ‚ç‚¹è¾“å‡º: handle_recommendation
first docs: [
Document(id='9b42e7a2-4f4f-4c8b-a6d8-3427f46f27e2', metadata={'source': '6.90E+12', 'row': 10048, 'product_id': '6.90E+12', 'product_name': 'Nè½¯ç»å…¸é¦™çƒŸ(æ¡)', 'product_price': '125.0', 'category': 'é¦™çƒŸ', 'position': 'B596', 'stock': '88', 'sales': '52'}, page_content='å“å:Nè½¯ç»å…¸é¦™çƒŸ(æ¡);ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:125.0;'),
Document(id='701dd2c6-6592-406e-b558-75173862e4fd', metadata={'source': '6.94E+12', 'row': 6323, 'product_id': '6.94E+12', 'product_name': 'å¯å’¯', 'product_price': '5.0', 'category': 'å¯å’¯', 'position': 'B624', 'stock': '42', 'sales': '44'}, page_content='å“å:å¯å’¯;ç±»åˆ«:å¯å’¯;ä»·æ ¼:5.0;'),
Document(id='183f99d1-8b8e-4830-b2a3-bd28eb6b449a', metadata={'source': '6.90E+12', 'row': 18159, 'product_id': '6.90E+12', 'product_name': 'å¥½çŒ«(é•¿ä¹ä¹ç¾)', 'product_price': '20.0', 'category': 'é¦™çƒŸ', 'position': 'A706', 'stock': '50', 'sales': '87'}, page_content='å“å:å¥½çŒ«(é•¿ä¹ä¹ç¾);ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:20.0;'),
Document(id='b69104f7-af24-444b-baa0-70e086dbd7de', metadata={'source': '6.97E+12', 'row': 3258, 'product_id': '6.97E+12', 'product_name': 'æ— æ„æŸ‘æ©˜å¯å¯å¤šç”¨ç©ºæ°”é¦™æ°› 400ml', 'product_price': '9.9', 'category': 'é¦™æ°›', 'position': 'B816', 'stock': '45', 'sales': '98'}, page_content='å“å:æ— æ„æŸ‘æ©˜å¯å¯å¤šç”¨ç©ºæ°”é¦™æ°› 400ml;ç±»åˆ«:é¦™æ°›;ä»·æ ¼:9.9;'),
Document(id='5cf965a4-fa59-41ad-9f4d-4683f7c7eafb', metadata={'source': '6.97E+12', 'row': 8139, 'product_id': '6.97E+12', 'product_name': 'é˜²é£æ‰“ç«æœºè“è“å”å”ï¼ˆ24å°æ—¶è¥ä¸šï¼‰', 'product_price': '2.0', 'category': 'æ‰“ç«', 'position': 'A118', 'stock': '68', 'sales': '30'}, page_content='å“å:é˜²é£æ‰“ç«æœºè“è“å”å”ï¼ˆ24å°æ—¶è¥ä¸šï¼‰;ç±»åˆ«:æ‰“ç«;ä»·æ ¼:2.0;'),
Document(id='80a54af3-8782-471e-abed-53cb41100ac2', metadata={'source': '6.90E+12', 'row': 5097, 'product_id': '6.90E+12', 'product_name': 'é»„é¹¤æ¥¼(è¿·ä½ é†‡å‘³)', 'product_price': '20.0', 'category': 'é¦™çƒŸ', 'position': 'B317', 'stock': '35', 'sales': '16'}, page_content='å“å:é»„é¹¤æ¥¼(è¿·ä½ é†‡å‘³);ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:20.0;'),
Document(id='a3aae68f-941f-49bd-a22e-deb47e651edf', metadata={'source': '6.90E+12', 'row': 6737, 'product_id': '6.90E+12', 'product_name': 'NåŒå–œå¥½æ—¥å­ç²¾å“ç¡¬ç›’é¦™çƒŸ(åŒ…)()', 'product_price': '15.0', 'category': 'çƒŸç›’', 'position': 'B727', 'stock': '42', 'sales': '54'}, page_content='å“å:NåŒå–œå¥½æ—¥å­ç²¾å“ç¡¬ç›’é¦™çƒŸ(åŒ…)();ç±»åˆ«:çƒŸç›’;ä»·æ ¼:15.0;'),
Document(id='d5b111b4-9e77-4c7e-9888-b3003d89e385', metadata={'source': '6.90E+12', 'row': 3418, 'product_id': '6.90E+12', 'product_name': 'å¨‡å­ï¼ˆè“)*10åŒ…', 'product_price': '140.0', 'category': 'é¦™çƒŸ', 'position': 'B856', 'stock': '88', 'sales': '78'}, page_content='å“å:å¨‡å­ï¼ˆè“)*10åŒ…;ç±»åˆ«:é¦™çƒŸ;ä»·æ ¼:140.0;'),
Document(id='a5220ea1-0aaa-40b7-b52a-a9315d5f450b', metadata={'source': '6.90E+12', 'row': 48, 'product_id': '6.90E+12', 'product_name': 'é•¿åŸ(è¿·ä½ å’–å•¡)é¦™çƒŸ(åŒ…)', 'product_price': '25.0', 'category': 'çƒŸè‰', 'position': 'B14', 'stock': '12', 'sales': '75'}, page_content='å“å:é•¿åŸ(è¿·ä½ å’–å•¡)é¦™çƒŸ(åŒ…);ç±»åˆ«:çƒŸè‰;ä»·æ ¼:25.0;'),
Document(id='a98923a0-037b-4053-859d-75dda025b5ef', metadata={'source': '6.95E+12', 'row': 3050, 'product_id': '6.95E+12', 'product_name': 'èˆ’ å¯ä¹çº¸æŠ½', 'product_price': '3.0', 'category': 'çº¸æŠ½', 'position': 'B764', 'stock': '15', 'sales': '78'}, page_content='å“å:èˆ’å¯ä¹çº¸æŠ½;ç±»åˆ«:çº¸æŠ½;ä»·æ ¼:3.0;')]
sorted_docs: ['Nè½¯ç»å…¸é¦™çƒŸ(æ¡)', 'é•¿åŸ(è¿·ä½ å’–å•¡)é¦™çƒŸ(åŒ…)', 'å¨‡å­ï¼ˆè“)*10åŒ…', 'å¥½çŒ«(é•¿ä¹ä¹ç¾)', 'NåŒå–œå¥½æ—¥å­ç²¾å“ç¡¬ç›’é¦™çƒŸ(åŒ…)()']
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
```
LLMèŠ‚ç‚¹è¾“å‡º: å¼ ä¸‰å“¥ï¼Œä½ å¥½å‘€ï¼ä»²æœªå¸çƒŸå•¦ï¼Ÿæˆ‘è¿™é‡Œå¸®ä½¢æ¨ä»‹å’å‡ æ¬¾çƒŸï¼Œç‡ä¸‹ä»²æœ‰å“ªä¸€æ¬¾ç¬¦åˆä½ å˜…å£å‘³ã€‚

é¦–å…ˆæ¨ä»‹ä½ å˜…æ˜¯ **Nè½¯ç»å…¸é¦™çƒŸ**ï¼Œä¸€æ¡åå››æï¼ŒçœŸç³»å¤Ÿé“ï¼Œä»·æ ¼å…¬é“ï¼Œä»²æœ‰ä»²å¤§å˜…ä¼˜æƒ ï¼Œæ»¡ä¸‰ç™¾å°±è¿”ä¸‰åæŠµç”¨ï¼Œä¹°å¾—ä»²å¤š 
è¿”å¾—ä»²å¤šã€‚ç‡ç´§å•¦ï¼Œä»²æœ‰è¿åŒ…å£é¦™ç³–é€ï¼Œå¸å®ŒçƒŸå£å³åˆ»æ¸…æ–°ã€‚

æˆ–è€…ä½ ä»²å¯ä»¥ç”¨ä¼˜æƒ å»æ‹£ **é•¿åŸï¼ˆè¿·ä½ å’–å•¡ï¼‰é¦™çƒŸ** ï¼ŒåŒ…åŒ…è£…ï¼Œå•²å’–å•¡å‘³çœŸç³»å¥½é€‚åˆå–œæ¬¢ç‰¹åˆ«å£å‘³å˜…æœ‹å‹ï¼Œä»·æ ¼å»‰å®œï¼Œåˆ 
å•²ä¼˜æƒ ï¼Œæ»¡ä¸‰åå‡äº”ï¼Œå¥½åˆ’ç®—ï¼

å¦‚æœä»²æœ‰å…¶ä»–å˜…é€‰æ‹©ï¼Œå¯ä»¥çœ‹çœ‹ **å¨‡å­ï¼ˆè“ï¼‰**ï¼ŒååŒ…è£…ï¼Œæ˜¯ä½ å¯ä»¥è‡ªå·±æŠ½æ™’å®Œå˜…ï¼Œä»·æ ¼å””ç®—å¤ªè´µï¼Œé€‚åˆå¹³æ—¥æ…¢æ…¢äº«å—ã€‚  

è¿˜æœ‰ **å¥½çŒ«ï¼ˆé•¿ä¹ä¹ç¾ï¼‰**ï¼Œå‘³é“å””é”™ï¼Œä»·é’±æ›´åŠ äº²æ°‘ï¼Œå‡ é€‚åˆå˜´æ‚­ä»”ã€‚

æœ€åæœ‰æ¬¾ **NåŒå–œå¥½æ—¥å­ç²¾å“ç¡¬ç›’é¦™çƒŸ**ï¼ŒåŒ…è£é“ï¼Œé€‚åˆè‡ªç”¨æ™’ï¼Œä»·æ ¼å””ç®—è´µã€‚

è®°å¾—ä¹°çƒŸè¦ä¾å’—è§„å®šï¼Œä¹°æˆæ¡çƒŸå””å¯ä»¥æ‹†å¼€ï¼Œåº—å†…å””å¯ä»¥å¸çƒŸï¼Œå¯ä»¥æ¥çƒ­æ°´ï¼Œä»²æœ‰å£é¦™ç³–é€ï¼Œæ”¶å¥½å’—ï¼

å¸Œæœ›å¼ ä¸‰å“¥å¯ä»¥æ‹£åˆ°ä½ æ»¡æ„å˜…ï¼Œé£Ÿå¾—å¼€å¿ƒï¼ŒæŠ½å¾—å¥åº·ï¼
```python
[è°ƒè¯•] AIè¾“å‡ºå·²æŒä¹…åŒ–
```

ç”¨æˆ·: åº—é‡Œé”€å”®é¢æ€ä¹ˆæ ·

```python
[è°ƒè¯•] ç”¨æˆ·æ¶ˆæ¯å·²æŒä¹…åŒ–
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
æ„å›¾èŠ‚ç‚¹è¾“å‡º: handle_report
```

LLMèŠ‚ç‚¹è¾“å‡º: æ˜¨æ—¥ç»è¥ç®€æŠ¥:
    é”€å”®é¢: Â¥8937
    å‡€åˆ©æ¶¦: Â¥1513
    çƒ­é”€å•†å“: æ¤°æ ‘æ¤°æ±ã€å†œå¤«å±±æ³‰
å¯è§†åŒ–: æŸ±çŠ¶å›¾( é”€å”®é¢è¶‹åŠ¿) é¥¼å›¾(å•†å“å æ¯”)

```python
[è°ƒè¯•] AIè¾“å‡ºå·²æŒä¹…åŒ–
```
ç”¨æˆ·: ä½ æ²¡æ‡‚æˆ‘çš„æ„æ€ æˆ‘è¦è½¬äººå·¥ 
```python
[è°ƒè¯•] ç”¨æˆ·æ¶ˆæ¯å·²æŒä¹…åŒ–
INFO:httpx:HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
[è°ƒè¯•] æ„å›¾èŠ‚ç‚¹è¾“å‡º: handle_human_transfer
```

LLMèŠ‚ç‚¹è¾“å‡º: å·²ä¸ºæ‚¨è½¬æ¥å€¼ç­ç»ç†( å·¥ä½œæ—¶é—´9:00-21:00)

ç­‰å¾…æ—¶é—´çº¦2åˆ†é’Ÿ

Xè€æ¿, 123-1234-5678

```python
[è°ƒè¯•] AIè¾“å‡ºå·²æŒä¹…åŒ–
```
ç”¨æˆ·: ç»“è´¦å§å°åŠ©æ‰‹
```python
[è°ƒè¯•] ç”¨æˆ·æ¶ˆæ¯å·²æŒä¹…åŒ–
[è°ƒè¯•] æ„å›¾èŠ‚ç‚¹è¾“å‡º: handle_payment
```
LLMèŠ‚ç‚¹è¾“å‡º: æ”¯ä»˜å¤±è´¥ï¼Œè¯·é‡æ–°æ”¯ä»˜

LLMèŠ‚ç‚¹è¾“å‡º: æ”¯ä»˜æˆåŠŸï¼è¯·å–èµ°å•†å“

å‘Šåˆ«èŠ‚ç‚¹è¾“å‡º: å¼ ç”Ÿï¼Œå¤šè°¢å¸®è¡¬å‘€ï¼å†œå¤«å±±æ³‰ã€å¯ä¹åŒä¸­åçƒŸéƒ½é½å–‡ï½ä¸‹æ¬¡å†åšŸé¥®èŒ¶å•¦ï¼ğŸ˜ŠğŸ‘

## å…¶å®ƒ

æˆæœ¬æ§åˆ¶ï¼šLLM APIå…è´¹  ç½‘ç»œAPIå…è´¹  ASR+TTSå°‘é‡æ”¶è´¹
æ•ˆç‡ï¼šå¹³å‡æ¯è½®ç”Ÿæˆæ—¶é—´5s

